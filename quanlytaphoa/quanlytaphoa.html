<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Si√™u Th·ªã Mini - Trang ch·ªß</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  <style>
    body {
      background-color: #ffffff;
      font-family: 'Segoe UI', sans-serif;
      color: #000000;
      animation: fadeInUp 0.5s ease both;
    }

    .navbar {
      background-color: #2e7d32;
      /* m√†u xanh l√° */
    }

    .navbar-brand,
    .nav-link {
      color: #ffffff !important;
      font-weight: bold;
    }

    .nav-link.active {
      background-color: #1b5e20;
      /* m√†u xanh l√° ƒë·∫≠m h∆°n */
      border-radius: 5px;
      padding: 5px 10px;
    }

    .nav-link:hover {
      color: #a5d6a7 !important;
      /* xanh nh·∫°t khi hover */
    }

    .banner {
      background: url('https://cdn.pixabay.com/photo/2015/09/17/17/19/shopping-942253_1280.jpg') center/cover no-repeat;
      height: 300px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .banner h1 {
      font-size: 36px;
      background: rgba(46, 125, 50, 0.7);
      /* m√†u xanh l√° v·ªõi alpha */
      color: #ffffff;
      padding: 10px 20px;
      border-radius: 10px;
    }

    .category img,
    .product img {
      border-radius: 10px;
      width: 100%;
      max-height: 200px;
      object-fit: contain;
      background-color: #f0f0f0;
      display: block;
      margin: 0 auto 10px auto;
      transition: transform 0.3s ease;
    }

    .category img:hover,
    .product img:hover {
      transform: scale(1.05);
    }

    .section-title {
      color: #2e7d32;
      margin-top: 30px;
      margin-bottom: 20px;
      font-weight: 600;
    }

    .card {
      border: 1px solid #e0e0e0;
      border-radius: 10px;
      background-color: #f5f5f5;
      color: #000000;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: pointer;
    }

    .card:hover {
      box-shadow: 0 4px 20px rgba(240, 233, 233, 0.2);
      transform: translateY(-5px);
    }

    .btn-success {
      background-color: #2e7d32;
      border-color: #2e7d32;
      transition: background-color 0.3s ease, border-color 0.3s ease;
    }

    .btn-success:hover {
      background-color: #1b5e20;
      border-color: #1b5e20;
    }

    @keyframes fadeInUp {
      from {
        transform: translateY(20px);
        opacity: 0;
      }

      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
  </style>

</head>

<body>
  <nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">üõí Si√™u Th·ªã Mini</a>
      <ul class="navbar-nav me-auto">
        <li class="nav-item"><a class="nav-link active" href="quanlytaphoa.html">Trang ch·ªß</a></li>
        <li class="nav-item"><a class="nav-link" href="products.html">S·∫£n ph·∫©m</a></li>
        <li class="nav-item"><a class="nav-link" href="#" id="cart-link">Gi·ªè h√†ng (0)</a></li>
        <li class="nav-item"><a class="nav-link" href="#" id="history-link">L·ªãch s·ª≠</a></li>
      </ul>
      <div class="d-flex align-items-center" id="user-area">
      </div>
    </div>
  </nav>

  <div class="container mt-3">
    <div class="banner">
      <h1>Ch√†o m·ª´ng ƒë·∫øn v·ªõi Si√™u Th·ªã Mini<br><small class="fs-5">Kh√°m ph√° th·∫ø gi·ªõi mua s·∫Øm ti·ªán l·ª£i</small></h1>
    </div>
  </div>

  <div class="container mt-4">
    <div class="row text-center">
      <div class="col-md-4 category">
        <a href="sanphammoi.html" class="d-block text-decoration-none text-dark">
          <img src="suadac.png" alt="S·∫£n ph·∫©m m·ªõi" class="img-fluid" />
          <p class="mt-2">S·∫£n ph·∫©m m·ªõi</p>
        </a>
      </div>
      <div class="col-md-4 category">
        <a href="khuyenmai.html" class="d-block text-decoration-none text-dark">
          <img src="cam.png" alt="Khuy·∫øn m√£i hot" class="img-fluid" />
          <p class="mt-2">Khuy·∫øn m√£i hot</p>
        </a>
      </div>
      <div class="col-md-4 category">
        <a href="giadung.html" class="d-block text-decoration-none text-dark">
          <img src="do-dung-nha-bep.png" alt="H√†ng gia d·ª•ng" class="img-fluid" />
          <p class="mt-2">H√†ng gia d·ª•ng</p>
        </a>
      </div>
    </div>
  </div>

  <div class="container">
    <h3 class="section-title">S·∫£n ph·∫©m n·ªïi b·∫≠t</h3>
    <div class="row" id="product-list">
      <div class="col-6 col-md-3 mb-3 product">
        <div class="card bg-white">
          <img src="s·ªØa.jpg" class="card-img-top" alt="S·ªØa t∆∞∆°i" />
          <div class="card-body">
            <h5 class="card-title">S·ªØa t∆∞∆°i</h5>
            <p class="card-text text-success">8.000ƒë</p>
            <button class="btn btn-success btn-sm add-to-cart-btn">Th√™m v√†o gi·ªè</button>
          </div>
        </div>
      </div>
      <div class="col-6 col-md-3 mb-3 product">
        <div class="card bg-white">
          <img src="M√¨.jpg" class="card-img-top" alt="M√¨ t√¥m" />
          <div class="card-body">
            <h5 class="card-title">M√¨ t√¥m</h5>
            <p class="card-text text-success">4.000ƒë</p>
            <button class="btn btn-success btn-sm add-to-cart-btn">Th√™m v√†o gi·ªè</button>
          </div>
        </div>
      </div>
      <div class="col-6 col-md-3 mb-3 product">
        <div class="card bg-white">
          <img src="GAO-ST25-5-1.jpg" class="card-img-top" alt="G·∫°o ST25" />
          <div class="card-body">
            <h5 class="card-title">G·∫°o ST25</h5>
            <p class="card-text text-success">25.000ƒë/kg</p>
            <button class="btn btn-success btn-sm add-to-cart-btn">Th√™m v√†o gi·ªè</button>
          </div>
        </div>
      </div>
      <div class="col-6 col-md-3 mb-3 product">
        <div class="card bg-white">
          <img src="nuoc-mam-nam-ngu.webp" class="card-img-top" alt="N∆∞·ªõc m·∫Øm" />
          <div class="card-body">
            <h5 class="card-title">N∆∞·ªõc m·∫Øm</h5>
            <p class="card-text text-success">18.000ƒë</p>
            <button class="btn btn-success btn-sm add-to-cart-btn">Th√™m v√†o gi·ªè</button>
          </div>
        </div>
      </div>

      <div class="col-6 col-md-3 mb-3 product">
        <div class="card bg-white">
          <img src="tra-xanh.jpg" class="card-img-top" alt="Tr√† xanh" />
          <div class="card-body">
            <h5 class="card-title">Tr√† xanh</h5>
            <p class="card-text text-success">7.000ƒë</p>
            <button class="btn btn-success btn-sm add-to-cart-btn">Th√™m v√†o gi·ªè</button>
          </div>
        </div>
      </div>
      <div class="col-6 col-md-3 mb-3 product">
        <div class="card bg-white">
          <img src="bot-m√¨.jpg" class="card-img-top" alt="B·ªôt m√¨" />
          <div class="card-body">
            <h5 class="card-title">B·ªôt m√¨</h5>
            <p class="card-text text-success">20.000ƒë/kg</p>
            <button class="btn btn-success btn-sm add-to-cart-btn">Th√™m v√†o gi·ªè</button>
          </div>
        </div>
      </div>
      <div class="col-6 col-md-3 mb-3 product">
        <div class="card bg-white">
          <img src="duong.jpg" class="card-img-top" alt="ƒê∆∞·ªùng" />
          <div class="card-body">
            <h5 class="card-title">ƒê∆∞·ªùng</h5>
            <p class="card-text text-success">18.000ƒë/kg</p>
            <button class="btn btn-success btn-sm add-to-cart-btn">Th√™m v√†o gi·ªè</button>
          </div>
        </div>
      </div>
      <div class="col-6 col-md-3 mb-3 product">
        <div class="card bg-white">
          <img src="dau-an.jpg" class="card-img-top" alt="D·∫ßu ƒÉn" />
          <div class="card-body">
            <h5 class="card-title">D·∫ßu ƒÉn</h5>
            <p class="card-text text-success">30.000ƒë/l√≠t</p>
            <button class="btn btn-success btn-sm add-to-cart-btn">Th√™m v√†o gi·ªè</button>
          </div>
        </div>
      </div>

    </div>
  </div>

  <div class="modal fade" id="cartModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Gi·ªè h√†ng</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="cartItems"></div>
        <div class="modal-footer">
          <button class="btn btn-success" id="checkout-btn">Thanh to√°n</button>
          <button class="btn btn-secondary" data-bs-dismiss="modal">ƒê√≥ng</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="historyModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">L·ªãch s·ª≠ mua h√†ng</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="historyItems"></div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="loginModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <form class="modal-content" id="loginForm">
        <div class="modal-header">
          <h5 class="modal-title">ƒêƒÉng nh·∫≠p</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="usernameInput" class="form-label">T√™n ƒëƒÉng nh·∫≠p</label>
            <input type="text" class="form-control" id="usernameInput" required />
          </div>
          <div class="mb-3">
            <label for="passwordInput" class="form-label">M·∫≠t kh·∫©u</label>
            <input type="password" class="form-control" id="passwordInput" required />
          </div>
          <div id="loginError" class="text-danger"></div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success">ƒêƒÉng nh·∫≠p</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
        </div>
      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Demo user (b·∫°n c√≥ th·ªÉ thay ƒë·ªïi ho·∫∑c th√™m danh s√°ch user)
    const DEMO_USER = { username: "user1", password: "123456" };

    // Kh·ªüi t·∫°o modal bootstrap
    const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
    const cartModal = new bootstrap.Modal(document.getElementById('cartModal'));
    const historyModal = new bootstrap.Modal(document.getElementById('historyModal'));

    // L·∫•y gi·ªè h√†ng t·ª´ localStorage
    function loadCart() {
      const data = localStorage.getItem('cart');
      return data ? JSON.parse(data) : [];
    }

    // L∆∞u gi·ªè h√†ng v√†o localStorage
    function saveCart(cart) {
      localStorage.setItem('cart', JSON.stringify(cart));
    }

    // L·∫•y l·ªãch s·ª≠ mua h√†ng t·ª´ localStorage
    function loadHistory() {
      const data = localStorage.getItem('history');
      return data ? JSON.parse(data) : [];
    }

    // L∆∞u l·ªãch s·ª≠ mua h√†ng v√†o localStorage
    function saveHistory(history) {
      localStorage.setItem('history', JSON.stringify(history));
    }

    // Ki·ªÉm tra tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
    function isLoggedIn() {
      return localStorage.getItem('loggedInUser') !== null;
    }

    // L·∫•y t√™n ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p
    function getLoggedInUser() {
      return localStorage.getItem('loggedInUser');
    }

    // C·∫≠p nh·∫≠t khu v·ª±c user tr√™n navbar
    function updateUserArea() {
      const userArea = document.getElementById('user-area');
      userArea.innerHTML = '';

      if (isLoggedIn()) {
        const username = getLoggedInUser();
        const welcome = document.createElement('span');
        welcome.className = 'me-2 text-white';
        welcome.textContent = `Ch√†o ${username}`;

        const logoutBtn = document.createElement('button');
        logoutBtn.className = 'btn btn-light btn-sm';
        logoutBtn.textContent = 'ƒêƒÉng xu·∫•t';
        logoutBtn.addEventListener('click', () => {
          localStorage.removeItem('loggedInUser');
          saveCart([]); // X√≥a gi·ªè h√†ng khi ƒëƒÉng xu·∫•t
          updateCartCount();
          updateUserArea();
          alert('B·∫°n ƒë√£ ƒëƒÉng xu·∫•t.');
        });

        userArea.appendChild(welcome);
        userArea.appendChild(logoutBtn);
      } else {
        const loginBtn = document.createElement('button');
        loginBtn.className = 'btn btn-light btn-sm';
        loginBtn.textContent = 'ƒêƒÉng nh·∫≠p';
        loginBtn.addEventListener('click', () => {
          document.getElementById('loginError').textContent = '';
          document.getElementById('loginForm').reset();
          loginModal.show();
        });
        userArea.appendChild(loginBtn);
      }
    }

    // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng s·∫£n ph·∫©m trong gi·ªè h√†ng hi·ªÉn th·ªã tr√™n navbar
    function updateCartCount() {
      const cart = loadCart();
      document.getElementById('cart-link').textContent = `Gi·ªè h√†ng (${cart.length})`;
    }

    // C·∫≠p nh·∫≠t modal gi·ªè h√†ng
    function updateCartModal() {
      const cart = loadCart();
      const container = document.getElementById('cartItems');
      if (cart.length === 0) {
        container.innerHTML = '<p>Gi·ªè h√†ng tr·ªëng.</p>';
      } else {
        let html = '<ul class="list-group">';
        cart.forEach((item, index) => {
          html += `<li class="list-group-item d-flex justify-content-between align-items-center">
                    ${item.name} - ${item.price}
                    <button class="btn btn-sm btn-danger" onclick="removeFromCart(${index})">X√≥a</button>
                  </li>`;
        });
        html += '</ul>';
        container.innerHTML = html;
      }
    }

    // Hi·ªÉn th·ªã modal gi·ªè h√†ng
    function showCart() {
      if (!isLoggedIn()) {
        alert('B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ xem gi·ªè h√†ng.');
        loginModal.show();
        return;
      }
      updateCartModal();
      cartModal.show();
    }

    // X√≥a s·∫£n ph·∫©m kh·ªèi gi·ªè h√†ng theo index
    function removeFromCart(index) {
      const cart = loadCart();
      cart.splice(index, 1);
      saveCart(cart);
      updateCartCount();
      updateCartModal();
    }

    // Thanh to√°n gi·ªè h√†ng
    function checkout() {
      if (!isLoggedIn()) {
        alert('B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ thanh to√°n.');
        loginModal.show();
        return;
      }
      const cart = loadCart();
      if (cart.length === 0) {
        alert('Gi·ªè h√†ng tr·ªëng!');
        return;
      }
      // Th√™m ƒë∆°n h√†ng v√†o l·ªãch s·ª≠
      const history = loadHistory();
      history.push([...cart]);
      saveHistory(history);

      saveCart([]); // X√≥a gi·ªè h√†ng sau thanh to√°n
      updateCartCount();
      updateCartModal();
      alert('Thanh to√°n th√†nh c√¥ng!');
      cartModal.hide();
    }

    // Hi·ªÉn th·ªã modal l·ªãch s·ª≠ mua h√†ng
    function showHistory() {
      if (!isLoggedIn()) {
        alert('B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ xem l·ªãch s·ª≠ mua h√†ng.');
        loginModal.show();
        return;
      }
      const history = loadHistory();
      const container = document.getElementById('historyItems');
      if (history.length === 0) {
        container.innerHTML = '<p>Ch∆∞a c√≥ ƒë∆°n h√†ng n√†o.</p>';
      } else {
        let html = '<ul class="list-group">';
        history.forEach((order, idx) => {
          html += `<li class="list-group-item">ƒê∆°n ${idx + 1}: ` + order.map(i => i.name).join(', ') + '</li>';
        });
        html += '</ul>';
        container.innerHTML = html;
      }
      historyModal.show();
    }

    // Th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng
    function addToCart(name, price) {
      if (!isLoggedIn()) {
        alert('B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ th√™m s·∫£n ph·∫©m v√†o gi·ªè h√†ng.');
        loginModal.show();
        return;
      }
      const cart = loadCart();
      cart.push({ name, price });
      saveCart(cart);
      updateCartCount();
    }

    // G√°n s·ª± ki·ªán cho n√∫t "Th√™m v√†o gi·ªè"
    function setupAddToCartButtons() {
      const buttons = document.querySelectorAll('.add-to-cart-btn');
      buttons.forEach(button => {
        button.addEventListener('click', () => {
          const card = button.closest('.card');
          const name = card.querySelector('.card-title').textContent;
          const price = card.querySelector('.card-text').textContent;
          addToCart(name, price);
        });
      });
    }

    // X·ª≠ l√Ω form ƒëƒÉng nh·∫≠p
    document.getElementById('loginForm').addEventListener('submit', e => {
      e.preventDefault();
      const username = document.getElementById('usernameInput').value.trim();
      const password = document.getElementById('passwordInput').value.trim();
      const errorDiv = document.getElementById('loginError');

      if (username === DEMO_USER.username && password === DEMO_USER.password) {
        localStorage.setItem('loggedInUser', username);
        updateUserArea();
        loginModal.hide();
        alert(`ƒêƒÉng nh·∫≠p th√†nh c√¥ng, ch√†o ${username}!`);
      } else {
        errorDiv.textContent = 'T√™n ƒëƒÉng nh·∫≠p ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ƒë√∫ng!';
      }
    });

    // G√°n s·ª± ki·ªán cho c√°c link Gi·ªè h√†ng v√† L·ªãch s·ª≠
    document.getElementById('cart-link').addEventListener('click', e => {
      e.preventDefault();
      showCart();
    });

    document.getElementById('history-link').addEventListener('click', e => {
      e.preventDefault();
      showHistory();
    });

    // G√°n s·ª± ki·ªán cho n√∫t thanh to√°n
    document.getElementById('checkout-btn').addEventListener('click', () => {
      checkout();
    });

    // Kh·ªüi t·∫°o khi trang load
    window.onload = () => {
      updateUserArea();
      updateCartCount();
      setupAddToCartButtons();
    };

    // Cho ph√©p g·ªçi removeFromCart t·ª´ HTML onclick
    window.removeFromCart = removeFromCart;
  </script>
</body>

</html>